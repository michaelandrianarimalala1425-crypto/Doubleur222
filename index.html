<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>X2 BNB Crypto</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #f3ba2f, #f0f4f8);
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: 2.1em;
      margin-bottom: 18px;
      color: #000;
      text-shadow: 1px 1px 2px #fff;
    }
    .language-select {
      text-align: center;
      margin-bottom: 18px;
    }
    select, button {
      padding: 8px 12px;
      border-radius: 7px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      margin: 3px;
      font-size: 1em;
    }
    button {
      background-color: #f3ba2f;
      color: #000;
    }
    button:hover {
      background-color: #e0a800;
    }
    .login-container, .dashboard {
      max-width: 420px;
      margin: 0 auto;
      background-color: #fff;
      padding: 24px;
      border-radius: 13px;
      box-shadow: 0 0 12px rgba(0,0,0,0.16);
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 7px;
      color: #333;
      font-size: 0.95em;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 12px;
      border: 2px solid #ccc;
      border-radius: 7px;
      font-size: 0.97em;
    }
    input.invalid {
      border-color: red;
    }
    .spinner {
      display: none;
      margin: 18px auto;
      width: 36px;
      height: 36px;
      border: 5px solid transparent;
      border-top: 5px solid red;
      border-right: 5px solid orange;
      border-bottom: 5px solid green;
      border-left: 5px solid blue;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .section {
      margin-top: 16px;
    }
    .section h2 {
      color: #f3ba2f;
      margin-bottom: 7px;
      font-size: 1.23em;
    }
    /* Unique historique cage */
    #histoLoginCage {
      margin: 16px auto 0 auto;
      max-width: 260px;
      min-height: 32px;
      background: #fff;
      border: 2px solid #f3ba2f;
      border-radius: 11px;
      box-shadow: 0 0 8px rgba(0,0,0,0.07);
      padding: 9px 10px;
      text-align: left;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      font-size: 0.87em;
    }
    .histo-title {
      width: 100%;
      text-align: center;
      color: #b87c1b;
      font-size: 0.95em;
      font-weight: 600;
      margin-bottom: 3px;
      letter-spacing: 0.5px;
    }
    .histo-montant {
      color: #e0a800;
      font-weight: bold;
      font-size: 0.93em;
      margin-bottom: 2px;
      display: block;
    }
    .histo-adress {
      font-family: 'Courier New', monospace;
      color: #007bff;
      font-size: 0.85em;
      word-break: break-all;
      margin-bottom: 2px;
      display: block;
      letter-spacing: 0.04em;
    }
    .ref-link {
      font-size: 0.93em;
      word-break: break-all;
      color: #007bff;
      margin-top: 8px;
      display: block;
    }
    .affiliation-bonus {
      font-weight: bold;
      color: #e53935 !important;
      margin: 5px 0 10px 0;
      display: block;
      font-size: 1em;
      text-shadow: 0 0 2px #fff, 0 0 7px #e53935;
    }
    /* Modal styles */
    .modal-bg {
      display: none;
      position: fixed;
      z-index: 1000;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.3);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 18px 20px;
      border-radius: 12px;
      min-width: 210px;
      max-width: 320px;
      box-shadow: 0 0 20px rgba(0,0,0,0.15);
      text-align: center;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .modal-close {
      position: absolute;
      top: 8px; right: 14px;
      font-size: 1.3em;
      color: #f3ba2f;
      background: none;
      border: none;
      cursor: pointer;
    }
    .deposit-address {
      font-family: 'Courier New', monospace;
      background: #f3ba2f33;
      padding: 5px 8px;
      border-radius: 6px;
      display: inline-block;
      margin-bottom: 8px;
      word-break: break-all;
      font-size: 0.92em;
    }
    .qr-container {
      text-align: center;
      margin: 6px 0 8px 0;
    }
    .popup-message {
      background: #fffceb;
      border-radius: 7px;
      color: #a94d00;
      padding: 6px 8px;
      margin-bottom: 7px;
      font-size: 0.93em;
      border: 1px solid #ffe5b7;
    }
    .modal-valid-btn {
      margin-top: 7px;
      padding: 7px 15px;
      background: #e0a800;
      color: #333;
      border-radius: 8px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      font-size: 0.95em;
    }
    .modal-valid-btn:disabled {
      background: #f9e5ab;
      color: #bbb;
      cursor: not-allowed;
    }
    .modal-valid-btn:hover:not(:disabled) {
      background: #f3ba2f;
      color: #000;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <h1>X2 BNB Crypto</h1>
  <div class="language-select">
    <select id="lang" onchange="setLanguage()">
      <option value="en">English 🇬🇧</option>
      <option value="fr">Français 🇫🇷</option>
    </select>
  </div>

  <div class="login-container" id="loginSection">
    <form id="bnbForm" onsubmit="return validateBNB()">
      <label id="labelAddress" for="bnbAddress">BNB Address</label>
      <input type="text" id="bnbAddress" name="bnbAddress" placeholder="0x..." required />
      <div class="spinner" id="spinner"></div>
      <button type="submit" id="loginBtn">Login</button>
    </form>
  </div>

  <!-- Historique (Retrait) dans une seule cage en bas login -->
  <div id="histoLoginCage"></div>

  <div class="dashboard" id="dashboardSection" style="display:none;">
    <div class="lang-toggle">
      <button onclick="setLanguage('en')">English 🇬🇧</button>
      <button onclick="setLanguage('fr')">Français 🇫🇷</button>
    </div>
    <div class="section">
      <h2 id="depositTitle">Deposit</h2>
      <button id="depositBtn"></button>
      <p id="depositText">Send your BNB to the platform to start the doubling process.</p>
    </div>
    <div class="section">
      <h2 id="withdrawTitle">Withdraw</h2>
      <p id="withdrawText">Withdrawal is automatic 24 hours after your deposit.</p>
    </div>
    <div class="section">
      <h2 id="affiliateTitle">Affiliation</h2>
      <span class="affiliation-bonus" id="affiliationBonus"></span>
      <p id="affiliateText">Share your referral link and earn bonuses from your network.</p>
      <a class="ref-link" id="refLink" href="https://x2-bnb-crypto-in-24h-instant.netlify.app/" target="_blank"></a>
    </div>
    <div class="section">
      <h2 id="aboutTitle">About Us</h2>
      <p id="aboutText">X2 BNB is a crypto doubling platform. Deposit BNB and get double automatically after 24 hours.</p>
    </div>
  </div>

  <!-- Deposit Modal (Popup) -->
  <div class="modal-bg" id="depositModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">×</button>
      <h3 id="modalTitle" style="font-size:1em;margin-bottom:6px;">Deposit BNB</h3>
      <div class="deposit-address" id="modalDepositAddress"></div>
      <div class="qr-container"><div id="modalQrcode"></div></div>
      <div class="popup-message" id="popupMessage"></div>
      <div style="margin-bottom:7px;">
        <label id="amountLabel" for="depositAmount" style="font-weight:500;margin-bottom:4px;display:block;font-size:0.93em;"></label>
        <select id="depositAmount" style="padding:6px 10px;border-radius:6px;font-size:0.93em;">
          <option value="" disabled selected>Select amount</option>
          <option value="0.003">0.003 BNB</option>
          <option value="0.005">0.005 BNB</option>
          <option value="0.01">0.01 BNB</option>
          <option value="0.05">0.05 BNB</option>
          <option value="0.1">0.1 BNB</option>
          <option value="0.5">0.5 BNB</option>
          <option value="1">1 BNB</option>
        </select>
        <button id="validDepositBtn" class="modal-valid-btn" disabled></button>
      </div>
      <p id="modalText" style="font-size:0.93em;"></p>
    </div>
  </div>

  <script>
    let currentLang = 'en';
    let userBNB = "";
    const BNB_DEPOSIT_ADDRESS = "0xB94a9e9136FEbB4e46f90B3bedd9410f6B23cc18";

    function setLanguage(lang) {
      currentLang = lang || document.getElementById('lang').value;
      document.getElementById('labelAddress').textContent =
        currentLang === 'fr' ? "Adresse BNB" : "BNB Address";
      document.getElementById('loginBtn').textContent =
        currentLang === 'fr' ? "Connexion" : "Login";
      document.getElementById('bnbAddress').placeholder =
        currentLang === 'fr' ? "0x... (adresse BNB)" : "0x... (BNB address)";
      document.getElementById('depositTitle').textContent =
        currentLang === 'fr' ? "Dépôt" : "Deposit";
      document.getElementById('depositBtn').textContent =
        currentLang === 'fr' ? "Déposer maintenant" : "Deposit Now";
      document.getElementById('depositText').textContent =
        currentLang === 'fr'
          ? "Envoyez vos BNB à la plateforme pour commencer le doublement."
          : "Send your BNB to the platform to start the doubling process.";
      document.getElementById('withdrawTitle').textContent =
        currentLang === 'fr' ? "Retrait" : "Withdraw";
      document.getElementById('withdrawText').textContent =
        currentLang === 'fr'
          ? "Le retrait est automatique 24h après votre dépôt."
          : "Withdrawal is automatic 24 hours after your deposit.";
      document.getElementById('affiliateTitle').textContent =
        currentLang === 'fr' ? "Affiliation" : "Affiliation";
      document.getElementById('affiliateText').textContent =
        currentLang === 'fr'
          ? "Partagez votre lien de parrainage et gagnez des bonus."
          : "Share your referral link and earn bonuses from your network.";
      document.getElementById('affiliationBonus').textContent =
        currentLang === 'fr'
          ? "Vous gagnez 50% de chaque dépôt effectué par votre filleul."
          : "You earn 50% of every deposit made by your referral.";
      document.getElementById('aboutTitle').textContent =
        currentLang === 'fr' ? "À propos" : "About Us";
      document.getElementById('aboutText').textContent =
        currentLang === 'fr'
          ? "X2 BNB est une plateforme de doublement crypto. Déposez vos BNB et recevez le double automatiquement après 24h."
          : "X2 BNB is a crypto doubling platform. Deposit BNB and get double automatically after 24 hours.";
      document.getElementById('amountLabel').textContent =
        currentLang === 'fr'
          ? "Choisissez le montant du dépôt (minimum 0.003 BNB) :"
          : "Choose deposit amount (minimum 0.003 BNB):";
      document.getElementById('validDepositBtn').textContent =
        currentLang === 'fr' ? "Valider le dépôt" : "Validate deposit";
      document.getElementById('validDepositBtn').disabled = true;
      if (document.getElementById('dashboardSection').style.display !== "none") {
        showDashboardInfo();
      }
    }

    function validateBNB() {
      const input = document.getElementById('bnbAddress');
      const spinner = document.getElementById('spinner');
      const address = input.value.trim();
      const isValid = /^0x[a-fA-F0-9]{40}$/.test(address);

      if (!isValid) {
        input.classList.add('invalid');
        alert(currentLang === 'fr'
          ? "⛔ Adresse BNB invalide. Elle doit commencer par '0x' et contenir 40 caractères hexadécimaux."
          : "⛔ Invalid BNB address. It must start with '0x' and contain 40 hexadecimal characters.");
        return false;
      }

      input.classList.remove('invalid');
      spinner.style.display = 'block';
      userBNB = address;

      setTimeout(() => {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('dashboardSection').style.display = 'block';
        spinner.style.display = 'none';
        setLanguage(currentLang);
        showDashboardInfo();
      }, 10000);

      return false;
    }

    function showDashboardInfo() {
      let refLink = "https://x2-bnb-crypto-in-24h-instant.netlify.app/";
      document.getElementById('refLink').textContent =
        (currentLang === 'fr' ? "Lien de parrainage: " : "Referral link: ") + refLink;
      document.getElementById('refLink').href = refLink;
    }

    // Deposit Modal Logic
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('depositBtn').onclick = showModal;
      document.getElementById('depositAmount').onchange = function() {
        document.getElementById('validDepositBtn').disabled = !this.value;
      };
      document.getElementById('validDepositBtn').onclick = function() {
        let selected = document.getElementById('depositAmount').value;
        if (selected) {
          alert(currentLang === 'fr'
            ? ("Montant sélectionné : " + selected + " BNB\nVeuillez envoyer ce montant sur l'adresse indiquée.")
            : ("Selected amount: " + selected + " BNB\nPlease send this amount to the address shown."));
        }
      };
    });

    function showModal() {
      document.getElementById('depositModal').style.display = 'flex';
      document.getElementById('modalDepositAddress').textContent = BNB_DEPOSIT_ADDRESS;
      document.getElementById('modalQrcode').innerHTML = '';
      new QRCode(document.getElementById("modalQrcode"), {
        text: BNB_DEPOSIT_ADDRESS,
        width: 70,
        height: 70,
        colorDark : "#000000",
        colorLight : "#ffffff",
      });

      document.getElementById('modalTitle').textContent =
        currentLang === 'fr' ? "Déposer BNB" : "Deposit BNB";
      document.getElementById('modalText').textContent =
        currentLang === 'fr'
          ? "Scannez le QR code ou copiez l'adresse pour faire le dépôt."
          : "Scan the QR code or copy the address to make your deposit.";
      document.getElementById('popupMessage').textContent =
        currentLang === 'fr'
          ? "Cette adresse BNB est dédiée uniquement au dépôt. N’envoyez jamais moins de 0,003 BNB. Le montant minimum de dépôt et de retrait est de 0,003 BNB. N’attendez pas plus de 20 minutes avant d’envoyer votre dépôt à cette adresse."
          : "This BNB address is for deposit only. Never send less than 0.003 BNB. Minimum deposit and withdrawal amount is 0.003 BNB. Do not wait more than 20 minutes before sending your deposit to this address.";
      document.getElementById('depositAmount').value = "";
      document.getElementById('validDepositBtn').disabled = true;
    }

    function closeModal() {
      document.getElementById('depositModal').style.display = 'none';
    }

    // Historique
    function randomBNBAddress() {
      let chars = 'abcdef0123456789';
      let addr = '0x';
      for(let i=0;i<40;i++) addr += chars[Math.floor(Math.random()*chars.length)];
      let visible = addr.slice(0, -10);
      let hidden = '●'.repeat(10);
      return visible + hidden;
    }
    function randomMontant() {
      if(Math.random()<0.05) {
        let bigs = [0.5,1];
        return bigs[Math.floor(Math.random()*bigs.length)].toFixed(3);
      } else {
        let min = 0.006, max = 0.01;
        let val = (Math.random()*(max-min)+min);
        return val.toFixed(3);
      }
    }
    function randomRetrait() {
      return {
        montant: randomMontant(),
        bnbAdress: randomBNBAddress()
      };
    }
    function showLoginHistoriqueCage() {
      let h = randomRetrait();
      let title = (currentLang === 'fr' ? "Historique Retrait" : "Withdrawal History");
      let html = `
        <div class="histo-title">${title}</div>
        <span class="histo-montant">${h.montant} BNB</span>
        <span class="histo-adress">${h.bnbAdress}</span>
      `;
      document.getElementById('histoLoginCage').innerHTML = html;
    }
    function tickLoginHistoriqueCage() {
      showLoginHistoriqueCage();
      setTimeout(tickLoginHistoriqueCage, 2000);
    }

    window.onload = () => {
      setLanguage('en');
      tickLoginHistoriqueCage();
    };
  </script>
</body>
</html>
